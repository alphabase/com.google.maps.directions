<!doctype html>
<html>
<head>
    <script type="text/javascript" src="/homey.js" data-origin="settings"></script>
</head>
<body>

<h1>Google Maps Directions</h1>

<fieldset>
    <legend>Google Maps API</legend>

    <div class="field row">
        <label for="api_key">API key</label>
        <input id="api_key" type="text" value=""/>
    </div>

    <p><a target="_blank"
                                                        href="https://console.developers.google.com/flows/enableapi?apiid=directions_backend&reusekey=true"
          title="Google Cloud platform">Click here to get an valid api key.</a></p>

</fieldset>

<fieldset>
    <legend>Work address</legend>

    <div class="field row">
        <label for="work_address">Work address</label>
        <input id="work_address" type="text" value=""/>
    </div>
    <p>Setting your work address here will provide you with tags containing actual traveling details. The transport mode
        used will be "driving".</p>

</fieldset>

<button class="right" onclick="save()">Save changes</button>

<script type="text/javascript">
    function onHomeyReady() {
        Homey.ready();
        Homey.get('api_key', function (err, api_key) {
            if (err) return console.error('Could not get api_key', err);
            if (typeof api_key != 'undefined') {
                document.getElementById('api_key').value = api_key;
            }
        });
        Homey.get('work_address', function (err, work_address) {
            if (err) return console.error('Could not et work_address', err);
            if (typeof work_address != 'undefined') {
                document.getElementById('work_address').value = work_address;
            }
        });
    }

    function save() {
        Homey.set('api_key', document.getElementById('api_key').value);
        Homey.set('work_address', document.getElementById('work_address').value);
        Homey.alert(__('settings.settingsSaved'));
    }
</script>

</body>
</html>